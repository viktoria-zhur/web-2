{% extends "base.html" %}

{% block lab %}Лабораторная работа 5 - Мои статьи{% endblock %}

{% block main %}
    <h1>Мои статьи</h1>
    
    <div>
        <a href="/lab5">← Главное меню</a> | 
        <a href="/lab5/create">Создать новую статью</a>
    </div>

    {% if articles %}
        <div>
            {% for article in articles %}
                <div style="border: 1px solid #ccc; padding: 15px; margin: 10px 0;">
                    <h2>{{ article['title'] }}</h2>
                    <div>
                        {{ article['article_text'] | replace('\n', '<br>') | safe }}
                    </div>
                    <div>
                        <small>ID: {{ article['id'] }}</small>
                        {% if article['created_at'] %}
                            <small> | Создано: {{ article['created_at'] }}</small>
                        {% endif %}
                    </div>
                    <div>
                        <a href="{{ url_for('lab5.edit_article', article_id=article['id']) }}">
                            Редактировать
                        </a>
                        <a href="{{ url_for('lab5.delete_article', article_id=article['id']) }}" 
                           onclick="return confirm('Вы уверены, что хотите удалить эту статью?')"
                           style="margin-left: 10px; color: red;">
                            Удалить
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div>
            <h3>У вас пока нет статей</h3>
            <p>Создайте свою первую статью!</p>
            <a href="/lab5/create">Создать первую статью</a>
        </div>
    {% endif %}
{% endblock %}